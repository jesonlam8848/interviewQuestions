# 浏览器原理

### 1. 进程与线程的概念

从本质上说，进程和线程都是 CPU 工作时间片的一个描述

**进程是资源分配的最小单位，线程是CPU调度的最小单位。**

### 2. 对浏览器的缓存机制的理解

**浏览器缓存的全过程：**

- 浏览器第一次加载资源，服务器返回 200，浏览器从服务器下载资源文件，并缓存
- 下一次加载资源时，由于强制缓存优先级较高，如果没有过期，并命中强缓存，直接从本地读取资源。
- 如果资源已过期，则表明强制缓存没有被命中，开始协商缓存，向服务器发送请求；
- 服务器收到请求后，被请求的文件如果没有修改，则命中协商缓存，返回 304；如果有修改，直接返回新的资源文件并返回 200；

### 3. Cookie、LocalStorage、SessionStorage区别

浏览器端常用的存储技术是 cookie 、localStorage 和 sessionStorage。

- **cookie：**cookie 最多能存储 4 k 数据
- **sessionStorage：** html5 提供的一种浏览器本地存储的方法。它一般能够存储 5M 或者更大的数据，它在当前窗口关闭后就失效了，并且 sessionStorage 只能被同一个窗口的同源页面访问共享。
- **localStorage：** html5 提供的一种浏览器本地存储的方法，它一般也能够存储 5M 或者更大的数据。它和 sessionStorage 不同的是，除非手动删除它，否则它不会失效，并且 localStorage 也只能被同源页面所访问共享。

### 4. 什么是同源策略

**协议**、**域名**、**端口号**必须一致。

### 5.解决跨域

- JSONP
- CORS
- iframe标签
- node中间件

### 6.事件模型

一个事件发生后，会在子元素及父元素之间进行传播（propagation），这种传播分为三个阶段。

（这种三阶段的传播模型，使得同一个事件会在多个节点上触发。）

1. 1. 由外向内找监听函数就是事件捕获
   2. 在目标节点触发事件
   3. 由内而外找监听函数就是事件冒泡

通俗一点来说就是一个事件被触发时，浏览器会自动从用户操作标签外的最上级标签逐渐向里检查是否有相同事件，如果有则触发，如果没有则继续向下检查直到用户操作的标签，这过程称为捕获，此时浏览器会继续由用户操作标签继续向是上级标签检查，如果有相同事件则触发，如果没有则继续向上检查直到最上级元素为止，此过程称为冒泡。（有监听函数就执行，并提供事件信息，没有就跳过）

事件传播的最上层对象是window，上例的事件传播顺序，在捕获阶段依次为window、document、html、body、父节点、目标节点，在冒泡阶段依次为目标节点、父节点、body、html、document、window。

DOM事件传播的三个阶段：**捕获阶段，目标阶段，冒泡阶段**

### 7. 对事件委托的理解

#### （1）事件委托的概念

事件委托本质上是利用了**浏览器事件冒泡**的机制。因为事件在冒泡过程中会上传到父节点，父节点可以获取到目标节点，因此可以把子节点的监听函数定义在父节点上，由父节点的监听函数统一处理多个子元素的事件，这种方式称为事件委托（事件代理）。

### 8. 对事件循环的理解

因为 js 是单线程运行的，在代码执行时，通过将不同函数的执行上下文压入执行栈中来保证代码的有序执行。

在执行同步代码时，如果遇到异步事件，js 引擎并不会一直等待其返回结果，而是会将这个事件挂起，继续执行执行栈中的其他任务。

当异步事件执行完毕后，再将异步事件对应的回调加入到一个任务队列中等待执行。任务队列可以分为宏任务队列和微任务队列

当当前执行栈中的事件执行完毕后，js 引擎首先会判断微任务队列中是否有任务可以执行，如果有就将微任务队首的事件压入栈中执行。当微任务队列中的任务都执行完成后再去执行宏任务队列中的任务。

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/426a3bf11f404821abb636690119621b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

### 9. 宏任务和微任务分别有哪些

- 微任务包括： promise 的回调、node 中的 process.nextTick 、对 Dom 变化监听的 MutationObserver。
- 宏任务包括： setTimeout ，setInterval ，setImmediate 一类的定时事件。



### 10. JS垃圾回收机制

- **标记清除**:在`js`中，最常用的垃圾回收机制，当变量进入执行环境时，被标记为“进入环境”，当变量离开执行环境时，会被标记为“离开环境”。垃圾回收器会销毁那些带标记的值并回收它们所占用的内存空间。
- **引用计数法**:当变量被引用一次,计数累加一次,若没有被引用也就是引用计数为0时,就会被回收

### 11.常见浏览器及其内核

- Webkit: 以前的Chrome浏览器
- Blink: 现在的Chrome浏览器
- Gecko: 火狐浏览器

- IE内核: IE浏览器

### 12.rem与em的区别

rem是根据根元素( html )的font-size变化，而em是根据父级的font-size变化
